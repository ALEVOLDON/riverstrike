<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover, user-scalable=no" />
  <meta name="theme-color" content="#061728" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <title>River Strike - Mobile Arcade</title>
  <link rel="manifest" href="manifest.json" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div id="game-wrap">
    <div class="game-frame">

    <!-- Decorative cockpit top panel -->
    <div class="panel-top">
      <div class="hud">
        <div class="stat"><span>Score</span><strong id="score">0</strong></div>
        <div class="stat"><span>Fuel</span><strong id="fuel">100%</strong></div>
        <div class="stat"><span>Lives</span><strong id="hp">3</strong></div>
      </div>
      <div class="panel-top__deco">
        <div class="pdeco pdeco--left">
          <div class="pdeco__light pdeco__light--g"></div>
          <div class="pdeco__light pdeco__light--y"></div>
          <div class="pdeco__light pdeco__light--r"></div>
        </div>
        <div class="pdeco__label">RIVER STRIKE</div>
        <div class="pdeco pdeco--right">
          <div class="pdeco__radar"></div>
          <button id="fullscreen-btn" class="fs-btn" title="Fullscreen" aria-label="Toggle fullscreen">⛶</button>
        </div>
      </div>
    </div>

    <!-- Game canvas -->
    <div id="game-container" aria-label="River Strike game"></div>

    <!-- Decorative cockpit bottom panel -->
    <div class="panel-bottom">
      <div class="controls">
        <div id="stick-zone" class="stick-zone">
          <div id="stick" class="stick"></div>
        </div>
        <div class="panel-bottom__mid">
          <div class="pb-meter">
            <div class="pb-meter__bar-wrap">
              <div class="pb-meter__bar" id="fuel-bar"></div>
            </div>
            <span class="pb-meter__label">FUEL</span>
          </div>
          <div class="powerup-status" id="powerup-status"></div>
        </div>
        <button id="fire" class="fire-btn" aria-label="Fire">FIRE</button>
      </div>
    </div>
    </div><!-- /.game-frame -->

    <div id="overlay" class="overlay">
      <div class="overlay__plane" id="intro-plane">✈</div>
      <h1>River Strike</h1>
      <p>Arcade action — dodge, shoot, collect fuel &amp; power-ups.</p>
      <p id="hi-line">WASD / arrows + Space</p>

      <!-- Version selector -->
      <div class="ver-select">
        <span class="ver-select__label">VERSION</span>
        <div class="ver-select__btns">
          <button class="ver-btn ver-btn--active" onclick="void 0" title="Current version">
            ▶ v2 — Phaser
          </button>
          <a class="ver-btn" href="v1/index.html" title="Classic Canvas edition">
            v1 — Classic
          </a>
        </div>
      </div>

      <button id="start">Start</button>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/phaser@3.90.0/dist/phaser.min.js"></script>
  <script src="phaser-game.js"></script>
  <script>
    // ── Fullscreen toggle ────────────────────────────────────────────────────
    document.getElementById('fullscreen-btn').addEventListener('click', () => {
      if (!document.fullscreenElement) {
        document.documentElement.requestFullscreen().catch(() => {});
      } else {
        document.exitFullscreen().catch(() => {});
      }
    });
    // ── Service Worker ───────────────────────────────────────────────────────
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('./sw.js').catch(() => {});
    }
    // ── Intro plane animation ────────────────────────────────────────────────
    (function() {
      const plane = document.getElementById('intro-plane');
      if (!plane) return;
      let t = 0;
      function tick() {
        t += 0.016;
        const y = Math.max(0, 1 - t * 1.2);   // fly in from top
        plane.style.transform = `translateY(${-80 + y * 80}px) scale(${1.2 - y * 0.2})`;
        plane.style.opacity   = Math.min(1, t * 3);
        if (y > 0) requestAnimationFrame(tick);
      }
      tick();
    })();
  </script>
</body>
</html>
